package uk.gov.justice.digital.hmpps.pecs.jpc.report

import org.junit.jupiter.api.Assertions
import org.junit.jupiter.api.Test
import uk.gov.justice.digital.hmpps.pecs.jpc.import.report.ReportProfile

class ReportProfileParserTest {

    @Test
    fun `Assert Profile can be created from json`() {
        val profileJson = """
            {"id":"PR1","person_id":"PE1","created_at":"2020-09-07T13:10:34+01:00","updated_at":"2020-09-07T13:11:30+01:00","assessment_answers":[{"title":"Solicitor or other legal representation","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"5c3ec467-4932-4d58-8281-fb27eaba3ddf","category":"court","key":"solicitor","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Sign or other language interpreter","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"821254c9-680b-4eb5-9c15-bf22e31e7c5e","category":"court","key":"interpreter","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Any other information","comments":"Magnam quod quas dignissimos illo minus.","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"aad663f1-d213-4ce7-af86-e180bdaa71dd","category":"court","key":"other_court","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Violent","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"af8cfc67-757c-4019-9d5e-618017de1617","category":"risk","key":"violent","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Escape","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"f2db9a8f-a5a9-40cf-875b-d1f5f62b2497","category":"risk","key":"escape","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Must be held separately","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"8f38efb0-36c1-4a56-8c66-3b72c9525f92","category":"risk","key":"hold_separately","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Self harm","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"4e7e54b4-a40c-488f-bdff-c6b2268ca4eb","category":"risk","key":"self_harm","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Concealed items","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"56826f64-da5d-42eb-b360-131e60bcc3d3","category":"risk","key":"concealed_items","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Any other risks","comments":"Et ut sunt consequatur qui consequatur.","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"4e37ac1a-a461-45a8-bca9-f0e994d3105e","category":"risk","key":"other_risks","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Special diet or allergy","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"e6faaf20-3072-4a65-91f7-93d52b16260f","category":"health","key":"special_diet_or_allergy","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Health issue","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"8872ad2e-b1b6-44c1-a937-b7540e633355","category":"health","key":"health_issue","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Medication","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"7ac3ffc9-57ac-4d0f-aa06-ad15b55c3cee","category":"health","key":"medication","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Wheelchair user","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"bc5fd9d1-6c86-4c39-b9a0-2e88bee98c50","category":"health","key":"wheelchair","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Pregnant","comments":"","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"bf0d3e65-f88a-4ee5-aad5-60947a1b5a51","category":"health","key":"pregnant","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Any other requirements","comments":"Numquam et quo nihil sequi velit.","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"5a4c5feb-9244-4c29-ab3f-d453c6fee10a","category":"health","key":"other_health","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null},{"title":"Requires special vehicle","comments":"Qui molestiae non eum officiis fuga.","created_at":"2020-09-07","expires_at":null,"assessment_question_id":"1a73d31a-8dd4-47b6-90a0-15ce4e332539","category":"health","key":"special_vehicle","nomis_alert_type":null,"nomis_alert_code":null,"nomis_alert_type_description":null,"nomis_alert_description":null,"imported_from_nomis":null}]}
            """.trimIndent()

        val parsedProfile = ReportProfile.fromJson(profileJson)

       Assertions.assertEquals(reportProfileFactory(), parsedProfile)
    }

}